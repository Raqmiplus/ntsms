import{L as b}from"./LoadingButton.f1b29148.js";import{T as x}from"./TextareaInput.00094c51.js";import{_ as f,r as u,o as s,c as o,a as n,t as r,d as i,b as h,e as y,h as k}from"./app.6deb0a5e.js";const v={components:{TextareaInput:x,LoadingButton:b},props:{order:Object},data(){return{data:null,text:null,sending:!1,sent:!1,errors:{},error:null}},methods:{send(){this.errors={},this.error=null,this.sending=!0,this.sending=!0,this.$axios.post(this.route("customers.sms",this.order.customer.id),{text:this.text}).then(e=>{this.sending=!1,this.sent=e.data.success,e.data.success?this.$emit("close"):this.error=e.data.error}).catch(e=>{this.sending=!1,console.log(e.response),this.errors=e.response.data.errors})}}},C={key:0,class:"w-full -my-6"},V={class:"w-full bg-white rounded shadow-lg leading-normal p-4"},w={class:"font-bold"},T=["innerHTML"],S={key:0,class:"text-green-500 mb-4"},B={key:1},L={key:0,class:"text-red-500 mb-4"},N={key:1,class:"text-red-500 mb-4"},W={class:"-m-4 px-8 py-4 bg-gray-100 border-t border-gray-200 flex items-center rounded-b"},j={key:0,class:"btn-spinner ltr:mr-2 rtl:ml-2"};function D(e,l,a,H,t,p){var d,c;const g=u("textarea-input"),_=u("loading-button");return a.order?(s(),o("div",C,[n("div",V,[n("h4",w,r(e.$t("Send Whatsapp message to Customer")),1),n("h4",{class:"text-sm mt-2 mb-4",innerHTML:e.$t("sending_to_html",{name:a.order.customer.name,phone:a.order.customer.phone})},null,8,T),t.sent?(s(),o("div",S,r(e.$t("Whatsapp message has been successfully sent to customer.")),1)):(s(),o("div",B,[t.error?(s(),o("div",L,r(t.error),1)):i("",!0),(d=t.errors)!=null&&d.text?(s(),o("div",N,r(t.errors.text.join(", ")),1)):i("",!0)])),h(g,{modelValue:t.text,"onUpdate:modelValue":l[0]||(l[0]=m=>t.text=m),resize:!1,errors:(c=t.errors)==null?void 0:c.text,class:"pb-10 w-full",label:"Whatsapp message Text"},null,8,["modelValue","errors"]),n("div",W,[n("button",{class:"text-gray-700 hover:text-gray-800",type:"button",onClick:l[1]||(l[1]=m=>e.$emit("close"))},r(e.$t("Cancel")),1),h(_,{type:"button",onClick:p.send,loading:t.sending,class:"btn-gray px-4 py-2 ml-auto flex items-center"},{default:y(()=>[t.sending?(s(),o("div",j)):i("",!0),k(" "+r(e.$t("Send")),1)]),_:1},8,["onClick","loading"])])])])):i("",!0)}const I=f(v,[["render",D]]);export{I as S};
